# VipaksTestTask
Тестовое задание в Випакс

# Описание

Задание соискателю на должность "Разработчик C# / WPF"
Информационное табло аэропорта

Создать приложение для отображения информации о работе аэропорта.

Из текстового файла загрузить расписание рейсов.
Расписание содержит информацию о
 - типе самолёта (*)
 - вылет/прилёт
 - времени вылета/прилёта
 - городе (куда вылетел/откуда прилетел)

(*) Тип самолёта определяет его максимальную вместимость,
фактическое количество пассажиров определяется случайным образом в процессе работы приложения.

При старте приложения начинается имитация работы аэропорта, согласно расписания.
Скорость имитации задается множителем (от x1 до x10000).
Скорость имитации можно изменять во время работы приложения.

Интерфейс приложения.

Сверху - Строка информации о последнем рейсе.

Основная область (слева) - Количество пассажиров (Прилёт)
 - в последнем рейсе
 - за последние 24 часа
 - сумма за всё время работы

Основная область (справа) - Количество пассажиров (Вылет)
 - в последнем рейсе
 - за последние 24 часа
 - сумма за всё время работы

Снизу - Гистограмма (прилёт/вылет) за последние 24 часа (накопление за 1 час).

Каждое изменение информации должно быть анимировано и привлекать внимание.
Навыки дизайна не оцениваются, но приветствуются.

1. Расписание содержит информацию о рейсах в течение суток и каждые 24 часа повторяется?
Да, каждый день одинаковое расписание
2. Нужна ли проверка корректности данных в файле (например на неверный тип самолета или неверный формат времени)?
В случае некорректных данных необходимо оповестить пользователя и корректно завершить работу
3. Из описания интерфейса не ясно где находится множитель скорости имитации, можно сделать в любом месте?
В любом удобном месте

# Комментарии
Расписание в файле schedule.json, файл копируется в выходную директорию и программа ожидает его найти рядом с бинарником.
Множители времени решил ограничить набором 1-10-100-1000-10000, но это ограничение только в пользовательском интерфейсе, программно ограничение от 1 до 10000.
Для отображения гистограмм использовал WpfToolkit http://wpf.codeplex.com/releases/view/40535 , т.к. есть опыт работы с этой библиотекой (но не было опыта работы с построением графиков). С ним же связана одна нерешенная проблема - если поместить разметку с графиком в DataTemplate, то никак не удается установить заголовки гистограмм в легенду.
Еще использовал библиотеку Prism, но это скорее по привычке, нежели из-за реальной необходимости :)
Для тестов использовал NUnit 3, т.к. он, в отличие от стандартного фреймворка, поддерживает параметризованные тесты и много чего еще. Тестировал не всю логику, а только наиболее сложную (относительно данной задачи).

# Краткое описание решения
Объект TimeManager с определенной переодичностью (по умолчанию 500 миллисекунд) вызывает событие Tick, в аргументы которого кладет текущее значение времени имитации. Это значение получается из значения периода, умноженного на множитель (от 1 до 10000) и не превышает 23:59:59 (полные дни отсекаются).
Объект AirportEngine подписывается на событие Tick и в обработчике события проверяет, есть ли в расписании рейсы между прошлым значением времени и текущим. Если такие рейсы есть, то AirportEngine вызывает событие PlaneArrived или PlaneDepartured в соответствии с типом рейса, при этом добавляя в рейс количество пассажиров, которое каджый раз генерируется случайным образом и не превышает количество, которое может поместиться в самолет.
Различные ViewModels подписываются на события PlaneArrived или PlaneDepartured и собирают информацию о пасссажирах.
